<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BGGC Random Game</title>
</head>
<body>
    <img src= https://user-images.githubusercontent.com/14614633/154339148-fdd2fcdc-41d6-49d6-b7d0-8a2c2d3a48b7.jpg alt="BGG Image" height="100" width="300"/>
    <hr>
    <h1>BGG Companion</h1>
    <nav>
        <table>
            <tbody>
                <tr>
                    <td> <a href="./home.html">Random Game</a> </td>
                    <td> | </td>
                    <td> <a href="./leaderboards.html">[PLACEHOLDER] Leaderboards</a> </td>
                </tr>
            </tbody>
        </table>
    </nav>
    <div id="random-game-request">
        <h2>Random Game</h2>
        <label for="user">Enter a <a href="https://boardgamegeek.com/" target="_blank">BoardGameGeek</a> user to choose a random game from their collection</label>
        <input type="text" name="user" id="user" value="JDGiardino" required>
        <br>
        <br>
        <input type="submit" value="Submit" id="submit">
    </div>
    <div id="random-game-response">
        <p id="game-name">
        </p>
    </div>
    <script>
        function get_random_game() { // creating a JS function called get random game
            const user = document.getElementById("user").value; // creating a variable "user" which is equal to: the value of the element input with an ID of user
            fetch('http://127.0.0.1:5000/random_game?user='+ user) // a get request to the flask endpoint + the user variable
            .then(response => response.json()) // .then happens async after the above.  an Anyomous function that takes a response instance as an argument and returns a json for the response
            .then(game => { // another .then happens async after the above.  This is another anaymous function that creates a game_field variable equal to the element with an id of game-name
                const game_field = document.getElementById("game-name");
                game_field.innerText = game.name; // and than sets the inner text of the element equal to the property name of the json response game
            });
        }

        const submit_button = document.getElementById("submit");
        submit_button.addEventListener("click", get_random_game);


    </script>
</body>
</html>